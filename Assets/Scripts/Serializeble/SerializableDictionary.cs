using System.Collections.Generic;
using UnityEngine;
[System.Serializable]
public class SerializableDictionary<Tkey, TValue> : Dictionary<Tkey, TValue>, ISerializationCallbackReceiver
{

    private List<Tkey> Tkeys = new List<Tkey>();
    private List<TValue> Tvalues = new List<TValue>();



    public void OnAfterDeserialize()
    {
        Clear();
        if (Tkeys.Count != Tvalues.Count)
        {
            Debug.LogError("Удаляй игру!");
        }

        for (int i = 0; i < Tkeys.Count; i++)
        {
            Add(Tkeys[i], Tvalues[i]);
        }

    }

    public void OnBeforeSerialize()
    {
        Tkeys.Clear();
        Tvalues.Clear();
        foreach (KeyValuePair<Tkey, TValue> kvp in this)
        {
            Tkeys.Add(kvp.Key);
            Tvalues.Add(kvp.Value);
        }
    }
}


















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































